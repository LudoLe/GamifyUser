(()=>{"use strict";var e,t={564:(e,t,n)=>{function a(e,t,n=null){$("#mainContainer").append('<div class="modal" tabindex="-1" id="#mainModal">\n\t<div class="modal-dialog">\n\t  <div class="modal-content">\n\t\t<div class="modal-header">\n\t\t  <h5 class="modal-title">'+e+'</h5>\n\t\t  <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t\t\t<span aria-hidden="true">&times;</span>\n\t\t  </button>\n\t\t</div>\n\t\t<div class="modal-body">\n\t\t  <p>'+t+'</p>\n\t\t</div>\n\t\t<div class="modal-footer">\n\t\t  <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>\n\t\t</div>\n\t  </div>\n\t</div>\n  </div>'),$(".modal").modal("show"),$(".modal").on("hidden.bs.modal",(function(){if(document.getElementById("mainContainer").removeChild($(".modal")[0]),null!=n)for(const e of n)e()}))}let o;n.d(t,{A:()=>D});let r=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let s=null;function l(){return null!==s&&s.buffer===o.memory.buffer||(s=new Uint8Array(o.memory.buffer)),s}function i(e,t){return r.decode(l().subarray(e,e+t))}const d=new Array(32).fill(void 0);d.push(void 0,null,!0,!1);let c=d.length;function m(e){c===d.length&&d.push(d.length+1);const t=c;return c=d[t],d[t]=e,t}function u(e){return d[e]}function p(e){const t=u(e);return function(e){e<36||(d[e]=c,c=e)}(e),t}let f=0,b=new TextEncoder("utf-8");const g="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){const n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};let y=null;function h(){return null!==y&&y.buffer===o.memory.buffer||(y=new Int32Array(o.memory.buffer)),y}function E(e,t,n){return p(o.sort(m(e),t,n))}!async function e(t){void 0===t&&(t="file:///home/ale/Documents/Projects/Java/GamifyUser/WebContent/js/sort_wasm.js".replace(/\.js$/,"_bg.wasm"));const n={wbg:{}};n.wbg.__wbindgen_json_parse=function(e,t){return m(JSON.parse(i(e,t)))},n.wbg.__wbg_new_3346f1e19c364e69=function(e){return m(new Date(u(e)))},n.wbg.__wbg_getTime_cf686ab22ab03a3e=function(e){return u(e).getTime()},n.wbg.__wbindgen_object_drop_ref=function(e){p(e)},n.wbg.__wbindgen_json_serialize=function(e,t){const n=u(t);var a=function(e,t,n){if(void 0===n){const n=b.encode(e),a=t(n.length);return l().subarray(a,a+n.length).set(n),f=n.length,a}let a=e.length,o=t(a);const r=l();let s=0;for(;s<a;s++){const t=e.charCodeAt(s);if(t>127)break;r[o+s]=t}if(s!==a){0!==s&&(e=e.slice(s)),o=n(o,a,a=s+3*e.length);const t=l().subarray(o+s,o+a);s+=g(e,t).written}return f=s,o}(JSON.stringify(void 0===n?null:n),o.__wbindgen_malloc,o.__wbindgen_realloc),r=f;h()[e/4+1]=r,h()[e/4+0]=a},n.wbg.__wbindgen_throw=function(e,t){throw new Error(i(e,t))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:a,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return o=a.exports,e.__wbindgen_wasm_module=r,o}("js/sort_wasm_bg.wasm");const v=(e,t,n)=>{let a=document.createElement("div"),o=document.createElement("h5");o.textContent="Search by Date",a.append(o);let r=document.createElement("input");return a.append(r),r.type="date",r.name="searchDate",r.classList.add("form-control"),r.id="searchDate",r.addEventListener("change",(a=>{a.preventDefault(),""!==r.value&&$.ajax({method:"GET",url:e+r.value,success:e=>{t(e)},error:(e,t,a)=>{n()}})})),a},w=(e,t,n,a)=>{let o=document.createElement("div");o.id="containerSearchName";let r=document.createElement("h5");r.textContent="Search by Name",o.append(r),o.style.setProperty("margin-top","28px");let s=document.createElement("input");return o.append(s),s.type="text",s.name="name",s.placeholder="Fill me",s.autocomplete="off",s.setAttribute("list","datalistSearch"),s.classList.add("form-control"),s.id="searchName",s.addEventListener("input",(a=>{a.preventDefault(),""!==s.value&&$.ajax({method:"GET",url:e+s.value,success:function(e){t(e)},error:function(e,t,a){n()}})})),o.addEventListener("keyup",(e=>{e.preventDefault(),"Enter"===e.key&&a(s.value)})),o};var L;!function(e){e[e.DATE=0]="DATE",e[e.NAME=1]="NAME"}(L||(L={})),function(e){e.compare=(t,n=!1)=>(a,o)=>{let r=!1;switch(t){case e.DATE:r=new Date(a.datetime)<new Date(o.datetime);break;case e.NAME:r=a.name<o.name;break;default:return-1}return!n===r?1:-1}}(L||(L={}));const C=(e,t,n,a,o,r,s)=>{if(a!=e){t.textContent+="↓";for(const e of n)e.textContent=e.textContent.replace("↑",""),e.textContent=e.textContent.replace("↓","");a=e}o?(r="true"===sessionStorage.getItem("WASMavailable")?E(r,!0,e===L.DATE):r.sort(L.compare(e)),t.textContent=t.textContent.replace("↑","↓"),o=!1):(r="true"===sessionStorage.getItem("WASMavailable")?E(r,!1,e===L.DATE):r.sort(L.compare(e,!0)),t.textContent=t.textContent.replace("↓","↑"),o=!0);let l=r.map((e=>e.questionnaireId));for(const e of l){let t=document.querySelector(`[data-table-id='${e}']`);s.insertAdjacentElement("afterbegin",t)}return a},x=e=>{let t=document.getElementById("datalistSearch");if(null==t)t=document.createElement("datalist"),t.id="datalistSearch";else for(;t.lastElementChild;)t.removeChild(t.lastElementChild);return $.each(e,((e,n)=>{let a=document.createElement("option");a.value=n.name,t.append(a)})),t};let A=$("#mainContainer");document.documentElement.style.setProperty("--screen-y",window.innerHeight+"px");const S=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})();sessionStorage.setItem("WASMavailable",S.toString()),window.onresize=()=>{0!==document.getElementsByClassName("col-table-8").length&&document.getElementsByClassName("col-table-8")[0].style.setProperty("max-height",window.innerHeight-150+"px"),document.getElementById("mainContainer").style.setProperty("max-height",window.innerHeight-150+"px")};let I=!1;window.addEventListener("popstate",(e=>{I=!0,null!=e.state.url?_(e.state.url,e.state.data):_("logout")}));const _=(e,t=null)=>{console.log("Changing tab to => "+e),I?I=!1:history.pushState({url:e,data:t},e),document.title="Admin: "+e;let o=A[0];null===e?document.body.removeChild(o):(A.addClass("slide-out"),o.addEventListener("animationend",(()=>{document.body.removeChild(o)})));let r=null;switch(e){case"creation":r=(()=>{const e=function(){let e=+sessionStorage.getItem("questionNumber")||1,t=document.createElement("input");return t.id="inputQuestion"+e,t.type="text",t.name="Question"+e,t.className="form-control question",t.placeholder="Question",document.getElementById("questionFormGroup").appendChild(t),e++,sessionStorage.setItem("questionNumber",e.toString()),!1};let t=document.createElement("form");t.id="mainForm";let n=document.createElement("div");n.classList.add("form-group"),t.append(n);let o=document.createElement("div");o.classList.add("form-row"),n.append(o);let r=document.createElement("div");r.classList.add("col-md-6"),o.append(r);let s=document.createElement("label");s.for="inputName",s.textContent="Name",r.append(s);let l=document.createElement("input");l.type="text",l.name="name",l.classList.add("form-control"),l.id="inputName",l.placeholder="Enter product name",l.required=!0,r.append(l);let i=document.createElement("div");i.classList.add("col-md-6"),i.style.setProperty("text-align","center"),o.append(i);let d=document.createElement("label");d.for="inputImageRow",d.textContent="Image",i.append(d);let c=document.createElement("div");c.classList.add("row","justify-content-center"),c.id="inputImageRow",i.append(c);let m=document.createElement("label");m.for="inputImage",m.id="imageFakeLabel",m.classList.add("btn","btn-outline-primary"),m.textContent="Browse for an image",m.style.setProperty("position","absolute"),m.style.setProperty("bottom","0"),m.style.setProperty("margin","0 0 0 0"),c.append(m);let u=document.createElement("input");u.type="file",u.classList.add("form-control"),u.addEventListener("change",(e=>{sessionStorage.setItem("imageUploaded","true")})),u.id="inputImage",u.name="image",u.required=!0,u.hidden=!0,m.append(u);let p=document.createElement("div");p.classList.add("form-group"),t.append(p);let f=document.createElement("label");f.for="inputDate",f.textContent="Date",p.append(f);let b=document.createElement("input");b.type="date",b.name="date",b.classList.add("form-control"),b.id="inputDate",b.required=!0,p.append(b);let g=document.createElement("label");g.for="inputQuestion0",g.textContent="Questions",t.append(g);let y=document.createElement("div");t.append(y),y.classList.add("form-group"),y.id="questionFormGroup";let h=document.createElement("input");h.type="text",h.name="Question0",h.classList.add("form-control","question"),l.id="inputQuestion0",h.placeholder="Question",h.required=!0,y.append(h);let E=document.createElement("button");E.classList.add("btn","btn-outline-primary"),E.addEventListener("click",(t=>{t.preventDefault(),e()})),E.id="addQuestionButton",E.textContent="Add Question",E.style.setProperty("margin-right","10px"),t.append(E);let v=document.createElement("button");return v.classList.add("btn","btn-outline-success"),v.type="submit",v.textContent="Create!",v.addEventListener("click",(e=>{null!==sessionStorage.getItem("imageUploaded")||a("Error","Please upload an image")})),t.append(v),$("#addQuestionButton").on("click",e),t})();break;case"inspection":r=(()=>{let e=document.createElement("div");e.classList.add("row");let t=document.createElement("div");t.classList.add("col-md-8","col-table-8");let n=document.createElement("div");n.classList.add("col-md-4"),n.classList.add("col-search");let o=document.createElement("table");o.classList.add("table","table-borderless"),e.append(t),e.append(n);let r=null;n.append(v("/GamifyUser/admin/getQuestionnaire?mode=1&date=",(e=>{D(e.questionnaireId)}),(()=>a("No result","Got nothing on that date.")))),n.append(w("/GamifyUser/admin/getQuestionnaire?mode=2&name=",(e=>{r=e,n.append(x(e))}),(()=>a("Error","Error")),(e=>{for(const t of r)if(t.name===e)return void D(t.questionnaireId)}))),t.append(o);let s=document.createElement("thead");s.classList.add("thead"),o.append(s);let l=document.createElement("tr"),i=document.createElement("th");i.textContent="Date ↓";let d=document.createElement("th");d.textContent="Product ";let c=document.createElement("th");c.textContent="Detail",s.append(l),l.append(i),l.append(d),l.append(c);let m=document.createElement("tbody");o.append(m);let u=null;$.getJSON("/GamifyUser/admin/listQuestionnaires?start=0&size=100",(function(e){u=e,$.each(e,(function(e,t){let n=document.createElement("tr");n.setAttribute("data-table-id",t.questionnaireId);let a=document.createElement("td");a.textContent=t.datetime.slice(0,12).replaceAll(",",""),n.append(a),a=document.createElement("td"),a.textContent=t.name,n.append(a),a=document.createElement("td");let o=document.createElement("button");o.classList.add("btn","btn-outline-primary"),o.addEventListener("click",(e=>{D(t.questionnaireId)}));let r=document.createElement("i");r.classList.add("fas","fa-newspaper"),r.textContent=" Open",r.style.setProperty("font-weight","lighter"),o.append(r),a.append(o),n.append(a),m.append(n)}))}));let p=!1,f=!1,b=L.DATE;return i.onclick=()=>{b=C(L.DATE,i,[d],b,p,u,m),p=!p},d.onclick=()=>{b=C(L.NAME,d,[i],b,f,u,m),f=!f},e})();break;case"deletion":r=(()=>{const e=e=>{$.ajax({url:"/GamifyUser/admin/delete?id="+e.questionnaireId,type:"DELETE",success:function(e){a("Success!","Questionnaire deleted correctly",[()=>location.reload()])},error:function(e,t,n){a("Error",e.responseText)}})};let t=document.createElement("div");t.classList.add("row");let n=document.createElement("div");n.classList.add("col-md-8","col-table-8-red");let o=document.createElement("div");o.classList.add("col-md-4"),o.classList.add("col-search");let r=document.createElement("table");r.classList.add("table","table-borderless"),t.append(n),t.append(o);let s=null;o.append(v("/GamifyUser/admin/getQuestionnaire?mode=3&date=",(t=>{e(t)}),(()=>a("No result","Got nothing on that date.")))),o.append(w("/GamifyUser/admin/getQuestionnaire?mode=4&name=",(e=>{s=e,o.append(x(e))}),(()=>a("Error","Error")),(t=>{for(const n of s)if(n.name===t)return void e(n)}))),n.append(r);let l=document.createElement("thead");l.classList.add("thead"),r.append(l);let i=document.createElement("tr"),d=document.createElement("th");d.textContent="Date ↓";let c=document.createElement("th");c.textContent="Product ";let m=document.createElement("th");m.textContent="Detail",l.append(i),i.append(d),i.append(c),i.append(m);let u=document.createElement("tbody");r.append(u);let p=null;$.getJSON("/GamifyUser/admin/listQuestionnaires?start=0&size=100&past=true",(function(t){p=t,$.each(t,(function(t,n){let a=document.createElement("tr");a.setAttribute("data-table-id",n.questionnaireId);let o=document.createElement("td");o.textContent=n.datetime.slice(0,12).replaceAll(",",""),a.append(o),o=document.createElement("td"),o.textContent=n.name,a.append(o),o=document.createElement("td");let r=document.createElement("button");r.classList.add("btn","btn-outline-danger");let s=document.createElement("i");r.addEventListener("click",(()=>e(n))),s.style.setProperty("font-weight","lighter"),s.classList.add("fas","fa-newspaper"),s.textContent=" Delete",r.append(s),o.append(r),a.append(o),u.append(a)}))}));let f=!1,b=!1,g=L.DATE;return d.onclick=()=>{g=C(L.DATE,d,[c],g,f,p,u),f=!f},c.onclick=()=>{g=C(L.NAME,c,[d],g,b,p,u),b=!b},t})();break;case"logout":window.location.pathname="/GamifyUser/LogOut";break;case"inspectionUserList":r=(e=>{const t="/GamifyUser/admin/listQuestionnaireCompletedUsers?start=0&size=100&id="+e,a="/GamifyUser/admin/listQuestionnaireCanceledUsers?start=0&size=100&id="+e;let o=document.createElement("div");o.classList.add("row"),o.id="mainRow",o.name=e;let r=document.createElement("div");r.classList.add("col-md-3");let s=document.createElement("ul");s.classList.add("list-group"),s.id="completedUsersList";let l=document.createElement("div");l.classList.add("col-md-3");let i=document.createElement("ul");i.classList.add("list-group"),i.id="canceledUsersList";let d=document.createElement("div");d.classList.add("col-md-6"),d.id="answersColumn";let c=document.createElement("h3");c.style.setProperty("text-align","center"),c.style.setProperty("margin-bottom","20px"),c.textContent="Completed";let m=document.createElement("h3");m.style.setProperty("text-align","center"),m.style.setProperty("margin-bottom","20px"),m.textContent="Canceled";let u=document.createElement("h3");return u.style.setProperty("text-align","center"),u.style.setProperty("margin-bottom","20px"),u.textContent="Answers",r.append(c),l.append(m),r.append(s),l.append(i),d.append(u),o.append(r),o.append(l),o.append(d),$.getJSON(t,(function(e){let t=document.getElementById("completedUsersList");t.classList.add("optional-answers-scrollable"),$.each(e,(function(e,n){let a=document.createElement("li");a.classList.add("list-group-item"),a.textContent=n.username,a.id=n.userId,t.append(a)})),n.e(832).then(n.bind(n,434)).then((e=>{e.default()}))})),$.getJSON(a,(function(e){let t=document.getElementById("canceledUsersList");t.classList.add("optional-answers-scrollable"),$.each(e,(function(e,n){let a=document.createElement("li");a.classList.add("list-group-item","canceled-users"),a.textContent=n.username,a.id=n.userId,t.append(a)}))})),o})(t);break;default:return}let s=document.createElement("div");s.classList.add("container","container-admin"),"creation"===e&&s.style.setProperty("overflow","auto"),s.id="mainContainer",s.append(r),s.classList.add("fade-in"),s.addEventListener("animationend",(e=>{s.classList.remove("fade-in")})),document.body.insertAdjacentElement("afterbegin",s),A=$(s)},k=(e,t=700)=>{$("body").fadeOut(t,(function(){document.getElementById("darkModeCSSLink").setAttribute("href","dark"===e?"css/dark-admin.css":""),$(this).fadeIn(t)}))};!function(){const e=Array.from(document.getElementsByClassName("sidenav-button"));document.addEventListener("mousedown",(t=>{let n=t.target;e.includes(n)&&(t.preventDefault(),_(n.id))}));const t=document.getElementById("gamifyLogo");if(null===localStorage.getItem("protipOpened")){let e=document.createElement("label");e.setAttribute("for","sidenav"),e.textContent="↓ ~try clicking here!~ ↓",e.classList.add("protip-div"),document.body.insertAdjacentElement("afterbegin",e)}const n=()=>localStorage.getItem("theme")||"light";"dark"===n()&&k("dark",0),t.addEventListener("click",(e=>{let t="light"===n()?"dark":"light";k(t),localStorage.setItem("theme",t),null===localStorage.getItem("protipOpened")&&(localStorage.setItem("protipOpened","true"),document.getElementsByClassName("protip-div")[0].remove())})),_("creation",null),$(document).on("submit","form",(function(e){e.preventDefault();let t=new Date($(this)[0][2].value),n=new Date;if(n.setHours(0,0,0,0),null==t||t<n)return void a("Error","Time travel doesn't exist yet, so please try entering a date that's not in the past.");if(null===sessionStorage.getItem("imageUploaded"))return void a("Error","Please upload an image");let o=new FormData($(this)[0]);$.ajax({method:"POST",url:"/GamifyUser/admin/create",data:o,processData:!1,contentType:!1,timeout:2e4,success:function(e){e.redirect?window.location.href=e.redirect:a("Success","Congrats! The questionnaire has been submitted successfully.")},error:function(e,t,n){a("Error",e.responseText)}})}))}();const D=e=>{_("inspectionUserList",e)}}},n={};function a(e){if(n[e])return n[e].exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"./inspectionUserPage.admin-78ec7e81e81c4c925317.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},a.l=(t,n,o)=>{if(e[t])e[t].push(n);else{var r,s;if(void 0!==o)for(var l=document.getElementsByTagName("script"),i=0;i<l.length;i++){var d=l[i];if(d.getAttribute("src")==t){r=d;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.src=t),e[t]=[n];var c=(n,a)=>{r.onerror=r.onload=null,clearTimeout(m);var o=e[t];if(delete e[t],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(a))),n)return n(a)},m=setTimeout(c.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=c.bind(null,r.onerror),r.onload=c.bind(null,r.onload),s&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0};a.f.j=(t,n)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,a)=>{o=e[t]=[n,a]}));n.push(o[2]=r);var s=a.p+a.u(t),l=new Error;a.l(s,(n=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,o[1](l)}}),"chunk-"+t)}};var t=(t,n)=>{for(var o,r,[s,l,i]=n,d=0,c=[];d<s.length;d++)r=s[d],a.o(e,r)&&e[r]&&c.push(e[r][0]),e[r]=0;for(o in l)a.o(l,o)&&(a.m[o]=l[o]);for(i&&i(a),t&&t(n);c.length;)c.shift()()},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a(564)})();